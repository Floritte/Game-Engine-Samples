; SPIR-V
; Version: 1.4
; Generator: Google Shaderc over Glslang; 10
; Bound: 232
; Schema: 0
               OpCapability Shader
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Fragment %main "main" %texturesMap %v_Material %v_UV %v_TBN %v_Normal %out_color %out_positions %v_FragPos %v_LinearDepth %out_normals %out_materials
               OpExecutionMode %main OriginUpperLeft
               OpSource GLSL 460
               OpSourceExtension "GL_GOOGLE_cpp_style_line_directive"
               OpSourceExtension "GL_GOOGLE_include_directive"
               OpName %main "main"
               OpName %fetchAlbedoMap_ "fetchAlbedoMap("
               OpName %fetchNormalMap_ "fetchNormalMap("
               OpName %fetchMetallicMap_ "fetchMetallicMap("
               OpName %fetchRoughnessMap_ "fetchRoughnessMap("
               OpName %fetchEmissiveMap_ "fetchEmissiveMap("
               OpName %fetchAOMap_ "fetchAOMap("
               OpName %texturesMap "texturesMap"
               OpName %Material "Material"
               OpMemberName %Material 0 "Albedo"
               OpMemberName %Material 1 "Metalness"
               OpMemberName %Material 2 "Roughness"
               OpMemberName %Material 3 "EmissionStrength"
               OpMemberName %Material 4 "UseAlbedroTex"
               OpMemberName %Material 5 "UseNormalTex"
               OpMemberName %Material 6 "UseMetallicTex"
               OpMemberName %Material 7 "UseRoughnessTex"
               OpMemberName %Material 8 "UseAOTex"
               OpMemberName %Material 9 "UseEmissiveTex"
               OpMemberName %Material 10 "AlbedroTexIndex"
               OpMemberName %Material 11 "NormalTexIndex"
               OpMemberName %Material 12 "MetallicTexIndex"
               OpMemberName %Material 13 "RoughnessTexIndex"
               OpMemberName %Material 14 "AOTexIndex"
               OpMemberName %Material 15 "EmissiveTexIndex"
               OpMemberName %Material 16 "ID"
               OpName %v_Material "v_Material"
               OpName %v_UV "v_UV"
               OpName %normal "normal"
               OpName %v_TBN "v_TBN"
               OpName %v_Normal "v_Normal"
               OpName %N "N"
               OpName %albedo "albedo"
               OpName %emissive "emissive"
               OpName %metallic "metallic"
               OpName %roughness "roughness"
               OpName %ao "ao"
               OpName %out_color "out_color"
               OpName %out_positions "out_positions"
               OpName %v_FragPos "v_FragPos"
               OpName %v_LinearDepth "v_LinearDepth"
               OpName %out_normals "out_normals"
               OpName %out_materials "out_materials"
               OpDecorate %texturesMap DescriptorSet 0
               OpDecorate %texturesMap Binding 24
               OpDecorate %v_Material Flat
               OpDecorate %v_Material Location 7
               OpDecorate %v_UV Location 2
               OpDecorate %v_TBN Location 4
               OpDecorate %v_Normal Location 1
               OpDecorate %out_color Location 0
               OpDecorate %out_positions Location 1
               OpDecorate %v_FragPos Location 0
               OpDecorate %v_LinearDepth Location 3
               OpDecorate %out_normals Location 2
               OpDecorate %out_materials Location 3
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v3float = OpTypeVector %float 3
          %8 = OpTypeFunction %v3float
         %13 = OpTypeFunction %float
         %22 = OpTypeImage %float 2D 0 0 0 1 Unknown
         %23 = OpTypeSampledImage %22
       %uint = OpTypeInt 32 0
  %uint_4096 = OpConstant %uint 4096
%_arr_23_uint_4096 = OpTypeArray %23 %uint_4096
%_ptr_UniformConstant__arr_23_uint_4096 = OpTypePointer UniformConstant %_arr_23_uint_4096
%texturesMap = OpVariable %_ptr_UniformConstant__arr_23_uint_4096 UniformConstant
    %v4float = OpTypeVector %float 4
   %Material = OpTypeStruct %v4float %float %float %float %uint %uint %uint %uint %uint %uint %uint %uint %uint %uint %uint %uint %uint
%_ptr_Input_Material = OpTypePointer Input %Material
 %v_Material = OpVariable %_ptr_Input_Material Input
        %int = OpTypeInt 32 1
     %int_10 = OpConstant %int 10
%_ptr_Input_uint = OpTypePointer Input %uint
%_ptr_UniformConstant_23 = OpTypePointer UniformConstant %23
    %v2float = OpTypeVector %float 2
%_ptr_Input_v2float = OpTypePointer Input %v2float
       %v_UV = OpVariable %_ptr_Input_v2float Input
      %int_5 = OpConstant %int 5
     %uint_1 = OpConstant %uint 1
       %bool = OpTypeBool
%_ptr_Function_v3float = OpTypePointer Function %v3float
     %int_11 = OpConstant %int 11
%mat3v3float = OpTypeMatrix %v3float 3
%_ptr_Input_mat3v3float = OpTypePointer Input %mat3v3float
      %v_TBN = OpVariable %_ptr_Input_mat3v3float Input
    %float_2 = OpConstant %float 2
    %float_1 = OpConstant %float 1
%_ptr_Input_v3float = OpTypePointer Input %v3float
   %v_Normal = OpVariable %_ptr_Input_v3float Input
     %int_12 = OpConstant %int 12
     %uint_0 = OpConstant %uint 0
     %int_13 = OpConstant %int 13
     %int_15 = OpConstant %int 15
     %int_14 = OpConstant %int 14
%_ptr_Function_v4float = OpTypePointer Function %v4float
      %int_4 = OpConstant %int 4
      %int_0 = OpConstant %int 0
%_ptr_Input_v4float = OpTypePointer Input %v4float
%_ptr_Function_float = OpTypePointer Function %float
      %int_9 = OpConstant %int 9
      %int_3 = OpConstant %int 3
%_ptr_Input_float = OpTypePointer Input %float
      %int_6 = OpConstant %int 6
      %int_1 = OpConstant %int 1
      %int_7 = OpConstant %int 7
      %int_2 = OpConstant %int 2
%float_0_0399999991 = OpConstant %float 0.0399999991
      %int_8 = OpConstant %int 8
%_ptr_Output_v4float = OpTypePointer Output %v4float
  %out_color = OpVariable %_ptr_Output_v4float Output
%out_positions = OpVariable %_ptr_Output_v4float Output
  %v_FragPos = OpVariable %_ptr_Input_v3float Input
%v_LinearDepth = OpVariable %_ptr_Input_float Input
%out_normals = OpVariable %_ptr_Output_v4float Output
%out_materials = OpVariable %_ptr_Output_v4float Output
       %main = OpFunction %void None %3
          %5 = OpLabel
          %N = OpVariable %_ptr_Function_v3float Function
     %albedo = OpVariable %_ptr_Function_v4float Function
        %136 = OpVariable %_ptr_Function_v4float Function
   %emissive = OpVariable %_ptr_Function_float Function
        %156 = OpVariable %_ptr_Function_float Function
   %metallic = OpVariable %_ptr_Function_float Function
        %171 = OpVariable %_ptr_Function_float Function
  %roughness = OpVariable %_ptr_Function_float Function
        %185 = OpVariable %_ptr_Function_float Function
         %ao = OpVariable %_ptr_Function_float Function
        %202 = OpVariable %_ptr_Function_float Function
        %129 = OpFunctionCall %v3float %fetchNormalMap_
               OpStore %N %129
        %133 = OpAccessChain %_ptr_Input_uint %v_Material %int_4
        %134 = OpLoad %uint %133
        %135 = OpIEqual %bool %134 %uint_1
               OpSelectionMerge %138 None
               OpBranchConditional %135 %137 %144
        %137 = OpLabel
        %139 = OpFunctionCall %v3float %fetchAlbedoMap_
        %140 = OpCompositeExtract %float %139 0
        %141 = OpCompositeExtract %float %139 1
        %142 = OpCompositeExtract %float %139 2
        %143 = OpCompositeConstruct %v4float %140 %141 %142 %float_1
               OpStore %136 %143
               OpBranch %138
        %144 = OpLabel
        %147 = OpAccessChain %_ptr_Input_v4float %v_Material %int_0
        %148 = OpLoad %v4float %147
               OpStore %136 %148
               OpBranch %138
        %138 = OpLabel
        %149 = OpLoad %v4float %136
               OpStore %albedo %149
        %153 = OpAccessChain %_ptr_Input_uint %v_Material %int_9
        %154 = OpLoad %uint %153
        %155 = OpIEqual %bool %154 %uint_1
               OpSelectionMerge %158 None
               OpBranchConditional %155 %157 %160
        %157 = OpLabel
        %159 = OpFunctionCall %float %fetchEmissiveMap_
               OpStore %156 %159
               OpBranch %158
        %160 = OpLabel
        %163 = OpAccessChain %_ptr_Input_float %v_Material %int_3
        %164 = OpLoad %float %163
               OpStore %156 %164
               OpBranch %158
        %158 = OpLabel
        %165 = OpLoad %float %156
               OpStore %emissive %165
        %168 = OpAccessChain %_ptr_Input_uint %v_Material %int_6
        %169 = OpLoad %uint %168
        %170 = OpIEqual %bool %169 %uint_1
               OpSelectionMerge %173 None
               OpBranchConditional %170 %172 %175
        %172 = OpLabel
        %174 = OpFunctionCall %float %fetchMetallicMap_
               OpStore %171 %174
               OpBranch %173
        %175 = OpLabel
        %177 = OpAccessChain %_ptr_Input_float %v_Material %int_1
        %178 = OpLoad %float %177
               OpStore %171 %178
               OpBranch %173
        %173 = OpLabel
        %179 = OpLoad %float %171
               OpStore %metallic %179
        %182 = OpAccessChain %_ptr_Input_uint %v_Material %int_7
        %183 = OpLoad %uint %182
        %184 = OpIEqual %bool %183 %uint_1
               OpSelectionMerge %187 None
               OpBranchConditional %184 %186 %189
        %186 = OpLabel
        %188 = OpFunctionCall %float %fetchRoughnessMap_
               OpStore %185 %188
               OpBranch %187
        %189 = OpLabel
        %191 = OpAccessChain %_ptr_Input_float %v_Material %int_2
        %192 = OpLoad %float %191
               OpStore %185 %192
               OpBranch %187
        %187 = OpLabel
        %193 = OpLoad %float %185
               OpStore %roughness %193
        %194 = OpLoad %float %roughness
        %196 = OpExtInst %float %1 FMax %194 %float_0_0399999991
               OpStore %roughness %196
        %199 = OpAccessChain %_ptr_Input_uint %v_Material %int_8
        %200 = OpLoad %uint %199
        %201 = OpIEqual %bool %200 %uint_1
               OpSelectionMerge %204 None
               OpBranchConditional %201 %203 %206
        %203 = OpLabel
        %205 = OpFunctionCall %float %fetchAOMap_
               OpStore %202 %205
               OpBranch %204
        %206 = OpLabel
               OpStore %202 %float_1
               OpBranch %204
        %204 = OpLabel
        %207 = OpLoad %float %202
               OpStore %ao %207
        %210 = OpLoad %v4float %albedo
               OpStore %out_color %210
        %213 = OpLoad %v3float %v_FragPos
        %215 = OpLoad %float %v_LinearDepth
        %216 = OpCompositeExtract %float %213 0
        %217 = OpCompositeExtract %float %213 1
        %218 = OpCompositeExtract %float %213 2
        %219 = OpCompositeConstruct %v4float %216 %217 %218 %215
               OpStore %out_positions %219
        %221 = OpLoad %v3float %N
        %222 = OpCompositeExtract %float %221 0
        %223 = OpCompositeExtract %float %221 1
        %224 = OpCompositeExtract %float %221 2
        %225 = OpCompositeConstruct %v4float %222 %223 %224 %float_1
               OpStore %out_normals %225
        %227 = OpLoad %float %metallic
        %228 = OpLoad %float %roughness
        %229 = OpLoad %float %ao
        %230 = OpLoad %float %emissive
        %231 = OpCompositeConstruct %v4float %227 %228 %229 %230
               OpStore %out_materials %231
               OpReturn
               OpFunctionEnd
%fetchAlbedoMap_ = OpFunction %v3float None %8
         %10 = OpLabel
         %36 = OpAccessChain %_ptr_Input_uint %v_Material %int_10
         %37 = OpLoad %uint %36
         %39 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %37
         %40 = OpLoad %23 %39
         %44 = OpLoad %v2float %v_UV
         %45 = OpImageSampleImplicitLod %v4float %40 %44
         %46 = OpVectorShuffle %v3float %45 %45 0 1 2
               OpReturnValue %46
               OpFunctionEnd
%fetchNormalMap_ = OpFunction %v3float None %8
         %12 = OpLabel
     %normal = OpVariable %_ptr_Function_v3float Function
         %50 = OpAccessChain %_ptr_Input_uint %v_Material %int_5
         %51 = OpLoad %uint %50
         %54 = OpIEqual %bool %51 %uint_1
               OpSelectionMerge %56 None
               OpBranchConditional %54 %55 %80
         %55 = OpLabel
         %60 = OpAccessChain %_ptr_Input_uint %v_Material %int_11
         %61 = OpLoad %uint %60
         %62 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %61
         %63 = OpLoad %23 %62
         %64 = OpLoad %v2float %v_UV
         %65 = OpImageSampleImplicitLod %v4float %63 %64
         %66 = OpVectorShuffle %v3float %65 %65 0 1 2
               OpStore %normal %66
         %70 = OpLoad %mat3v3float %v_TBN
         %71 = OpLoad %v3float %normal
         %73 = OpVectorTimesScalar %v3float %71 %float_2
         %75 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
         %76 = OpFSub %v3float %73 %75
         %77 = OpMatrixTimesVector %v3float %70 %76
         %78 = OpExtInst %v3float %1 Normalize %77
               OpReturnValue %78
         %80 = OpLabel
         %83 = OpLoad %v3float %v_Normal
         %84 = OpExtInst %v3float %1 Normalize %83
               OpReturnValue %84
         %56 = OpLabel
               OpUnreachable
               OpFunctionEnd
%fetchMetallicMap_ = OpFunction %float None %13
         %15 = OpLabel
         %88 = OpAccessChain %_ptr_Input_uint %v_Material %int_12
         %89 = OpLoad %uint %88
         %90 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %89
         %91 = OpLoad %23 %90
         %92 = OpLoad %v2float %v_UV
         %93 = OpImageSampleImplicitLod %v4float %91 %92
         %95 = OpCompositeExtract %float %93 0
               OpReturnValue %95
               OpFunctionEnd
%fetchRoughnessMap_ = OpFunction %float None %13
         %17 = OpLabel
         %99 = OpAccessChain %_ptr_Input_uint %v_Material %int_13
        %100 = OpLoad %uint %99
        %101 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %100
        %102 = OpLoad %23 %101
        %103 = OpLoad %v2float %v_UV
        %104 = OpImageSampleImplicitLod %v4float %102 %103
        %105 = OpCompositeExtract %float %104 0
               OpReturnValue %105
               OpFunctionEnd
%fetchEmissiveMap_ = OpFunction %float None %13
         %19 = OpLabel
        %109 = OpAccessChain %_ptr_Input_uint %v_Material %int_15
        %110 = OpLoad %uint %109
        %111 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %110
        %112 = OpLoad %23 %111
        %113 = OpLoad %v2float %v_UV
        %114 = OpImageSampleImplicitLod %v4float %112 %113
        %115 = OpCompositeExtract %float %114 0
               OpReturnValue %115
               OpFunctionEnd
%fetchAOMap_ = OpFunction %float None %13
         %21 = OpLabel
        %119 = OpAccessChain %_ptr_Input_uint %v_Material %int_14
        %120 = OpLoad %uint %119
        %121 = OpAccessChain %_ptr_UniformConstant_23 %texturesMap %120
        %122 = OpLoad %23 %121
        %123 = OpLoad %v2float %v_UV
        %124 = OpImageSampleImplicitLod %v4float %122 %123
        %125 = OpCompositeExtract %float %124 0
               OpReturnValue %125
               OpFunctionEnd
