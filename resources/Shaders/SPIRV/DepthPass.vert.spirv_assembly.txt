; SPIR-V
; Version: 1.4
; Generator: Google Shaderc over Glslang; 10
; Bound: 184
; Schema: 0
               OpCapability Shader
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint Vertex %main "main" %_ %gl_InstanceIndex %__0 %a_Weight %__1 %a_BoneIDs %a_Position %__2 %a_Normal %a_Tangent %a_UV
               OpSource GLSL 450
               OpSourceExtension "GL_GOOGLE_cpp_style_line_directive"
               OpSourceExtension "GL_GOOGLE_include_directive"
               OpName %main "main"
               OpName %instanceID "instanceID"
               OpName %PushConsts "PushConsts"
               OpMemberName %PushConsts 0 "depthMVP"
               OpMemberName %PushConsts 1 "dataOffset"
               OpName %_ ""
               OpName %gl_InstanceIndex "gl_InstanceIndex"
               OpName %model "model"
               OpName %InstanceData "InstanceData"
               OpMemberName %InstanceData 0 "matID"
               OpMemberName %InstanceData 1 "isAnimated"
               OpMemberName %InstanceData 2 "animOffset"
               OpMemberName %InstanceData 3 "entityID"
               OpMemberName %InstanceData 4 "model"
               OpName %InstancesBuffer "InstancesBuffer"
               OpMemberName %InstancesBuffer 0 "instances"
               OpName %__0 ""
               OpName %animOffset "animOffset"
               OpName %isAnimated "isAnimated"
               OpName %skinMat "skinMat"
               OpName %a_Weight "a_Weight"
               OpName %JointMatrices "JointMatrices"
               OpMemberName %JointMatrices 0 "joints"
               OpName %__1 ""
               OpName %a_BoneIDs "a_BoneIDs"
               OpName %pos "pos"
               OpName %a_Position "a_Position"
               OpName %gl_PerVertex "gl_PerVertex"
               OpMemberName %gl_PerVertex 0 "gl_Position"
               OpName %__2 ""
               OpName %a_Normal "a_Normal"
               OpName %a_Tangent "a_Tangent"
               OpName %a_UV "a_UV"
               OpMemberDecorate %PushConsts 0 ColMajor
               OpMemberDecorate %PushConsts 0 Offset 0
               OpMemberDecorate %PushConsts 0 MatrixStride 16
               OpMemberDecorate %PushConsts 1 Offset 64
               OpDecorate %PushConsts Block
               OpDecorate %gl_InstanceIndex BuiltIn InstanceIndex
               OpMemberDecorate %InstanceData 0 Offset 0
               OpMemberDecorate %InstanceData 1 Offset 4
               OpMemberDecorate %InstanceData 2 Offset 8
               OpMemberDecorate %InstanceData 3 Offset 12
               OpMemberDecorate %InstanceData 4 ColMajor
               OpMemberDecorate %InstanceData 4 Offset 16
               OpMemberDecorate %InstanceData 4 MatrixStride 16
               OpDecorate %_runtimearr_InstanceData ArrayStride 80
               OpMemberDecorate %InstancesBuffer 0 NonWritable
               OpMemberDecorate %InstancesBuffer 0 Offset 0
               OpDecorate %InstancesBuffer Block
               OpDecorate %__0 DescriptorSet 0
               OpDecorate %__0 Binding 25
               OpDecorate %a_Weight Location 5
               OpDecorate %_runtimearr_mat4v4float ArrayStride 64
               OpMemberDecorate %JointMatrices 0 ColMajor
               OpMemberDecorate %JointMatrices 0 NonWritable
               OpMemberDecorate %JointMatrices 0 Offset 0
               OpMemberDecorate %JointMatrices 0 MatrixStride 16
               OpDecorate %JointMatrices Block
               OpDecorate %__1 DescriptorSet 0
               OpDecorate %__1 Binding 28
               OpDecorate %a_BoneIDs Location 4
               OpDecorate %a_Position Location 0
               OpMemberDecorate %gl_PerVertex 0 BuiltIn Position
               OpDecorate %gl_PerVertex Block
               OpDecorate %a_Normal Location 1
               OpDecorate %a_Tangent Location 2
               OpDecorate %a_UV Location 3
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
       %uint = OpTypeInt 32 0
%_ptr_Function_uint = OpTypePointer Function %uint
      %float = OpTypeFloat 32
    %v4float = OpTypeVector %float 4
%mat4v4float = OpTypeMatrix %v4float 4
 %PushConsts = OpTypeStruct %mat4v4float %uint
%_ptr_PushConstant_PushConsts = OpTypePointer PushConstant %PushConsts
          %_ = OpVariable %_ptr_PushConstant_PushConsts PushConstant
        %int = OpTypeInt 32 1
      %int_1 = OpConstant %int 1
%_ptr_PushConstant_uint = OpTypePointer PushConstant %uint
%_ptr_Input_int = OpTypePointer Input %int
%gl_InstanceIndex = OpVariable %_ptr_Input_int Input
%_ptr_Function_mat4v4float = OpTypePointer Function %mat4v4float
%InstanceData = OpTypeStruct %uint %uint %uint %uint %mat4v4float
%_runtimearr_InstanceData = OpTypeRuntimeArray %InstanceData
%InstancesBuffer = OpTypeStruct %_runtimearr_InstanceData
%_ptr_StorageBuffer_InstancesBuffer = OpTypePointer StorageBuffer %InstancesBuffer
        %__0 = OpVariable %_ptr_StorageBuffer_InstancesBuffer StorageBuffer
      %int_0 = OpConstant %int 0
      %int_4 = OpConstant %int 4
%_ptr_StorageBuffer_mat4v4float = OpTypePointer StorageBuffer %mat4v4float
      %int_2 = OpConstant %int 2
%_ptr_StorageBuffer_uint = OpTypePointer StorageBuffer %uint
       %bool = OpTypeBool
%_ptr_Function_bool = OpTypePointer Function %bool
     %uint_0 = OpConstant %uint 0
    %float_1 = OpConstant %float 1
    %float_0 = OpConstant %float 0
         %55 = OpConstantComposite %v4float %float_1 %float_0 %float_0 %float_0
         %56 = OpConstantComposite %v4float %float_0 %float_1 %float_0 %float_0
         %57 = OpConstantComposite %v4float %float_0 %float_0 %float_1 %float_0
         %58 = OpConstantComposite %v4float %float_0 %float_0 %float_0 %float_1
         %59 = OpConstantComposite %mat4v4float %55 %56 %57 %58
%_ptr_Input_v4float = OpTypePointer Input %v4float
   %a_Weight = OpVariable %_ptr_Input_v4float Input
%_ptr_Input_float = OpTypePointer Input %float
%_runtimearr_mat4v4float = OpTypeRuntimeArray %mat4v4float
%JointMatrices = OpTypeStruct %_runtimearr_mat4v4float
%_ptr_StorageBuffer_JointMatrices = OpTypePointer StorageBuffer %JointMatrices
        %__1 = OpVariable %_ptr_StorageBuffer_JointMatrices StorageBuffer
      %v4int = OpTypeVector %int 4
%_ptr_Input_v4int = OpTypePointer Input %v4int
  %a_BoneIDs = OpVariable %_ptr_Input_v4int Input
     %uint_1 = OpConstant %uint 1
     %uint_2 = OpConstant %uint 2
     %uint_3 = OpConstant %uint 3
%_ptr_Function_v4float = OpTypePointer Function %v4float
    %v3float = OpTypeVector %float 3
%_ptr_Input_v3float = OpTypePointer Input %v3float
 %a_Position = OpVariable %_ptr_Input_v3float Input
%gl_PerVertex = OpTypeStruct %v4float
%_ptr_Output_gl_PerVertex = OpTypePointer Output %gl_PerVertex
        %__2 = OpVariable %_ptr_Output_gl_PerVertex Output
%_ptr_PushConstant_mat4v4float = OpTypePointer PushConstant %mat4v4float
%_ptr_Output_v4float = OpTypePointer Output %v4float
   %a_Normal = OpVariable %_ptr_Input_v3float Input
  %a_Tangent = OpVariable %_ptr_Input_v4float Input
    %v2float = OpTypeVector %float 2
%_ptr_Input_v2float = OpTypePointer Input %v2float
       %a_UV = OpVariable %_ptr_Input_v2float Input
       %main = OpFunction %void None %3
          %5 = OpLabel
 %instanceID = OpVariable %_ptr_Function_uint Function
      %model = OpVariable %_ptr_Function_mat4v4float Function
 %animOffset = OpVariable %_ptr_Function_uint Function
 %isAnimated = OpVariable %_ptr_Function_bool Function
    %skinMat = OpVariable %_ptr_Function_mat4v4float Function
        %pos = OpVariable %_ptr_Function_v4float Function
         %18 = OpAccessChain %_ptr_PushConstant_uint %_ %int_1
         %19 = OpLoad %uint %18
         %22 = OpLoad %int %gl_InstanceIndex
         %23 = OpBitcast %uint %22
         %24 = OpIAdd %uint %19 %23
               OpStore %instanceID %24
         %33 = OpLoad %uint %instanceID
         %36 = OpAccessChain %_ptr_StorageBuffer_mat4v4float %__0 %int_0 %33 %int_4
         %37 = OpLoad %mat4v4float %36
               OpStore %model %37
         %39 = OpLoad %uint %instanceID
         %42 = OpAccessChain %_ptr_StorageBuffer_uint %__0 %int_0 %39 %int_2
         %43 = OpLoad %uint %42
               OpStore %animOffset %43
         %47 = OpLoad %uint %instanceID
         %48 = OpAccessChain %_ptr_StorageBuffer_uint %__0 %int_0 %47 %int_1
         %49 = OpLoad %uint %48
         %51 = OpINotEqual %bool %49 %uint_0
               OpStore %isAnimated %51
               OpStore %skinMat %59
         %60 = OpLoad %bool %isAnimated
               OpSelectionMerge %62 None
               OpBranchConditional %60 %61 %62
         %61 = OpLabel
         %66 = OpAccessChain %_ptr_Input_float %a_Weight %uint_0
         %67 = OpLoad %float %66
         %72 = OpLoad %uint %animOffset
         %76 = OpAccessChain %_ptr_Input_int %a_BoneIDs %uint_0
         %77 = OpLoad %int %76
         %78 = OpBitcast %uint %77
         %79 = OpIAdd %uint %72 %78
         %80 = OpAccessChain %_ptr_StorageBuffer_mat4v4float %__1 %int_0 %79
         %81 = OpLoad %mat4v4float %80
         %82 = OpMatrixTimesScalar %mat4v4float %81 %67
         %84 = OpAccessChain %_ptr_Input_float %a_Weight %uint_1
         %85 = OpLoad %float %84
         %86 = OpLoad %uint %animOffset
         %87 = OpAccessChain %_ptr_Input_int %a_BoneIDs %uint_1
         %88 = OpLoad %int %87
         %89 = OpBitcast %uint %88
         %90 = OpIAdd %uint %86 %89
         %91 = OpAccessChain %_ptr_StorageBuffer_mat4v4float %__1 %int_0 %90
         %92 = OpLoad %mat4v4float %91
         %93 = OpMatrixTimesScalar %mat4v4float %92 %85
         %94 = OpCompositeExtract %v4float %82 0
         %95 = OpCompositeExtract %v4float %93 0
         %96 = OpFAdd %v4float %94 %95
         %97 = OpCompositeExtract %v4float %82 1
         %98 = OpCompositeExtract %v4float %93 1
         %99 = OpFAdd %v4float %97 %98
        %100 = OpCompositeExtract %v4float %82 2
        %101 = OpCompositeExtract %v4float %93 2
        %102 = OpFAdd %v4float %100 %101
        %103 = OpCompositeExtract %v4float %82 3
        %104 = OpCompositeExtract %v4float %93 3
        %105 = OpFAdd %v4float %103 %104
        %106 = OpCompositeConstruct %mat4v4float %96 %99 %102 %105
        %108 = OpAccessChain %_ptr_Input_float %a_Weight %uint_2
        %109 = OpLoad %float %108
        %110 = OpLoad %uint %animOffset
        %111 = OpAccessChain %_ptr_Input_int %a_BoneIDs %uint_2
        %112 = OpLoad %int %111
        %113 = OpBitcast %uint %112
        %114 = OpIAdd %uint %110 %113
        %115 = OpAccessChain %_ptr_StorageBuffer_mat4v4float %__1 %int_0 %114
        %116 = OpLoad %mat4v4float %115
        %117 = OpMatrixTimesScalar %mat4v4float %116 %109
        %118 = OpCompositeExtract %v4float %106 0
        %119 = OpCompositeExtract %v4float %117 0
        %120 = OpFAdd %v4float %118 %119
        %121 = OpCompositeExtract %v4float %106 1
        %122 = OpCompositeExtract %v4float %117 1
        %123 = OpFAdd %v4float %121 %122
        %124 = OpCompositeExtract %v4float %106 2
        %125 = OpCompositeExtract %v4float %117 2
        %126 = OpFAdd %v4float %124 %125
        %127 = OpCompositeExtract %v4float %106 3
        %128 = OpCompositeExtract %v4float %117 3
        %129 = OpFAdd %v4float %127 %128
        %130 = OpCompositeConstruct %mat4v4float %120 %123 %126 %129
        %132 = OpAccessChain %_ptr_Input_float %a_Weight %uint_3
        %133 = OpLoad %float %132
        %134 = OpLoad %uint %animOffset
        %135 = OpAccessChain %_ptr_Input_int %a_BoneIDs %uint_3
        %136 = OpLoad %int %135
        %137 = OpBitcast %uint %136
        %138 = OpIAdd %uint %134 %137
        %139 = OpAccessChain %_ptr_StorageBuffer_mat4v4float %__1 %int_0 %138
        %140 = OpLoad %mat4v4float %139
        %141 = OpMatrixTimesScalar %mat4v4float %140 %133
        %142 = OpCompositeExtract %v4float %130 0
        %143 = OpCompositeExtract %v4float %141 0
        %144 = OpFAdd %v4float %142 %143
        %145 = OpCompositeExtract %v4float %130 1
        %146 = OpCompositeExtract %v4float %141 1
        %147 = OpFAdd %v4float %145 %146
        %148 = OpCompositeExtract %v4float %130 2
        %149 = OpCompositeExtract %v4float %141 2
        %150 = OpFAdd %v4float %148 %149
        %151 = OpCompositeExtract %v4float %130 3
        %152 = OpCompositeExtract %v4float %141 3
        %153 = OpFAdd %v4float %151 %152
        %154 = OpCompositeConstruct %mat4v4float %144 %147 %150 %153
               OpStore %skinMat %154
               OpBranch %62
         %62 = OpLabel
        %157 = OpLoad %mat4v4float %model
        %158 = OpLoad %mat4v4float %skinMat
        %159 = OpMatrixTimesMatrix %mat4v4float %157 %158
        %163 = OpLoad %v3float %a_Position
        %164 = OpCompositeExtract %float %163 0
        %165 = OpCompositeExtract %float %163 1
        %166 = OpCompositeExtract %float %163 2
        %167 = OpCompositeConstruct %v4float %164 %165 %166 %float_1
        %168 = OpMatrixTimesVector %v4float %159 %167
               OpStore %pos %168
        %173 = OpAccessChain %_ptr_PushConstant_mat4v4float %_ %int_0
        %174 = OpLoad %mat4v4float %173
        %175 = OpLoad %v4float %pos
        %176 = OpMatrixTimesVector %v4float %174 %175
        %178 = OpAccessChain %_ptr_Output_v4float %__2 %int_0
               OpStore %178 %176
               OpReturn
               OpFunctionEnd
