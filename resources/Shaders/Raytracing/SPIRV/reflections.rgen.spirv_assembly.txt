; SPIR-V
; Version: 1.4
; Generator: Google Shaderc over Glslang; 10
; Bound: 166
; Schema: 0
               OpCapability RayTracingProvisionalKHR
               OpExtension "SPV_KHR_ray_tracing"
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint RayGenerationNV %main "main" %gl_LaunchIDEXT %gl_LaunchSizeEXT %_ %prd %topLevelAS %image
               OpSource GLSL 460
               OpSourceExtension "GL_EXT_ray_tracing"
               OpSourceExtension "GL_EXT_shader_explicit_arithmetic_types_int64"
               OpSourceExtension "GL_GOOGLE_cpp_style_line_directive"
               OpSourceExtension "GL_GOOGLE_include_directive"
               OpName %main "main"
               OpName %pixelCenter "pixelCenter"
               OpName %gl_LaunchIDEXT "gl_LaunchIDEXT"
               OpName %inUV "inUV"
               OpName %gl_LaunchSizeEXT "gl_LaunchSizeEXT"
               OpName %d "d"
               OpName %origin "origin"
               OpName %CameraProperties "CameraProperties"
               OpMemberName %CameraProperties 0 "viewProj"
               OpMemberName %CameraProperties 1 "viewInverse"
               OpMemberName %CameraProperties 2 "projInverse"
               OpName %_ ""
               OpName %target "target"
               OpName %direction "direction"
               OpName %rayFlags "rayFlags"
               OpName %tMin "tMin"
               OpName %tMax "tMax"
               OpName %hitPayload "hitPayload"
               OpMemberName %hitPayload 0 "hitValue"
               OpMemberName %hitPayload 1 "depth"
               OpMemberName %hitPayload 2 "attenuation"
               OpMemberName %hitPayload 3 "done"
               OpMemberName %hitPayload 4 "rayOrigin"
               OpMemberName %hitPayload 5 "rayDir"
               OpName %prd "prd"
               OpName %hitValue "hitValue"
               OpName %topLevelAS "topLevelAS"
               OpName %image "image"
               OpDecorate %gl_LaunchIDEXT BuiltIn LaunchIdNV
               OpDecorate %gl_LaunchSizeEXT BuiltIn LaunchSizeNV
               OpMemberDecorate %CameraProperties 0 ColMajor
               OpMemberDecorate %CameraProperties 0 Offset 0
               OpMemberDecorate %CameraProperties 0 MatrixStride 16
               OpMemberDecorate %CameraProperties 1 ColMajor
               OpMemberDecorate %CameraProperties 1 Offset 64
               OpMemberDecorate %CameraProperties 1 MatrixStride 16
               OpMemberDecorate %CameraProperties 2 ColMajor
               OpMemberDecorate %CameraProperties 2 Offset 128
               OpMemberDecorate %CameraProperties 2 MatrixStride 16
               OpDecorate %CameraProperties Block
               OpDecorate %_ DescriptorSet 0
               OpDecorate %_ Binding 2
               OpDecorate %prd Location 0
               OpDecorate %topLevelAS DescriptorSet 0
               OpDecorate %topLevelAS Binding 0
               OpDecorate %image DescriptorSet 0
               OpDecorate %image Binding 1
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v2float = OpTypeVector %float 2
%_ptr_Function_v2float = OpTypePointer Function %v2float
       %uint = OpTypeInt 32 0
     %v3uint = OpTypeVector %uint 3
%_ptr_Input_v3uint = OpTypePointer Input %v3uint
%gl_LaunchIDEXT = OpVariable %_ptr_Input_v3uint Input
     %v2uint = OpTypeVector %uint 2
  %float_0_5 = OpConstant %float 0.5
         %19 = OpConstantComposite %v2float %float_0_5 %float_0_5
%gl_LaunchSizeEXT = OpVariable %_ptr_Input_v3uint Input
    %float_2 = OpConstant %float 2
    %float_1 = OpConstant %float 1
    %v4float = OpTypeVector %float 4
%_ptr_Function_v4float = OpTypePointer Function %v4float
%mat4v4float = OpTypeMatrix %v4float 4
%CameraProperties = OpTypeStruct %mat4v4float %mat4v4float %mat4v4float
%_ptr_Uniform_CameraProperties = OpTypePointer Uniform %CameraProperties
          %_ = OpVariable %_ptr_Uniform_CameraProperties Uniform
        %int = OpTypeInt 32 1
      %int_1 = OpConstant %int 1
%_ptr_Uniform_mat4v4float = OpTypePointer Uniform %mat4v4float
    %float_0 = OpConstant %float 0
         %48 = OpConstantComposite %v4float %float_0 %float_0 %float_0 %float_1
      %int_2 = OpConstant %int 2
     %uint_0 = OpConstant %uint 0
%_ptr_Function_float = OpTypePointer Function %float
     %uint_1 = OpConstant %uint 1
    %v3float = OpTypeVector %float 3
%_ptr_Function_uint = OpTypePointer Function %uint
%float_0_00100000005 = OpConstant %float 0.00100000005
%float_10000 = OpConstant %float 10000
 %hitPayload = OpTypeStruct %v3float %int %v3float %int %v3float %v3float
%_ptr_RayPayloadNV_hitPayload = OpTypePointer RayPayloadNV %hitPayload
        %prd = OpVariable %_ptr_RayPayloadNV_hitPayload RayPayloadNV
      %int_0 = OpConstant %int 0
%_ptr_RayPayloadNV_int = OpTypePointer RayPayloadNV %int
         %87 = OpConstantComposite %v3float %float_0 %float_0 %float_0
%_ptr_RayPayloadNV_v3float = OpTypePointer RayPayloadNV %v3float
         %90 = OpConstantComposite %v3float %float_1 %float_1 %float_1
      %int_3 = OpConstant %int 3
      %int_4 = OpConstant %int 4
      %int_5 = OpConstant %int 5
%_ptr_Function_v3float = OpTypePointer Function %v3float
        %108 = OpTypeAccelerationStructureKHR
%_ptr_UniformConstant_108 = OpTypePointer UniformConstant %108
 %topLevelAS = OpVariable %_ptr_UniformConstant_108 UniformConstant
   %uint_255 = OpConstant %uint 255
       %bool = OpTypeBool
        %153 = OpTypeImage %float 2D 0 0 0 2 Rgba8
%_ptr_UniformConstant_153 = OpTypePointer UniformConstant %153
      %image = OpVariable %_ptr_UniformConstant_153 UniformConstant
      %v2int = OpTypeVector %int 2
       %main = OpFunction %void None %3
          %5 = OpLabel
%pixelCenter = OpVariable %_ptr_Function_v2float Function
       %inUV = OpVariable %_ptr_Function_v2float Function
          %d = OpVariable %_ptr_Function_v2float Function
     %origin = OpVariable %_ptr_Function_v4float Function
     %target = OpVariable %_ptr_Function_v4float Function
  %direction = OpVariable %_ptr_Function_v4float Function
   %rayFlags = OpVariable %_ptr_Function_uint Function
       %tMin = OpVariable %_ptr_Function_float Function
       %tMax = OpVariable %_ptr_Function_float Function
   %hitValue = OpVariable %_ptr_Function_v3float Function
         %15 = OpLoad %v3uint %gl_LaunchIDEXT
         %16 = OpVectorShuffle %v2uint %15 %15 0 1
         %17 = OpConvertUToF %v2float %16
         %20 = OpFAdd %v2float %17 %19
               OpStore %pixelCenter %20
         %22 = OpLoad %v2float %pixelCenter
         %24 = OpLoad %v3uint %gl_LaunchSizeEXT
         %25 = OpVectorShuffle %v2uint %24 %24 0 1
         %26 = OpConvertUToF %v2float %25
         %27 = OpFDiv %v2float %22 %26
               OpStore %inUV %27
         %29 = OpLoad %v2float %inUV
         %31 = OpVectorTimesScalar %v2float %29 %float_2
         %33 = OpCompositeConstruct %v2float %float_1 %float_1
         %34 = OpFSub %v2float %31 %33
               OpStore %d %34
         %45 = OpAccessChain %_ptr_Uniform_mat4v4float %_ %int_1
         %46 = OpLoad %mat4v4float %45
         %49 = OpMatrixTimesVector %v4float %46 %48
               OpStore %origin %49
         %52 = OpAccessChain %_ptr_Uniform_mat4v4float %_ %int_2
         %53 = OpLoad %mat4v4float %52
         %56 = OpAccessChain %_ptr_Function_float %d %uint_0
         %57 = OpLoad %float %56
         %59 = OpAccessChain %_ptr_Function_float %d %uint_1
         %60 = OpLoad %float %59
         %61 = OpCompositeConstruct %v4float %57 %60 %float_1 %float_1
         %62 = OpMatrixTimesVector %v4float %53 %61
               OpStore %target %62
         %64 = OpAccessChain %_ptr_Uniform_mat4v4float %_ %int_1
         %65 = OpLoad %mat4v4float %64
         %67 = OpLoad %v4float %target
         %68 = OpVectorShuffle %v3float %67 %67 0 1 2
         %69 = OpExtInst %v3float %1 Normalize %68
         %70 = OpCompositeExtract %float %69 0
         %71 = OpCompositeExtract %float %69 1
         %72 = OpCompositeExtract %float %69 2
         %73 = OpCompositeConstruct %v4float %70 %71 %72 %float_0
         %74 = OpMatrixTimesVector %v4float %65 %73
               OpStore %direction %74
               OpStore %rayFlags %uint_1
               OpStore %tMin %float_0_00100000005
               OpStore %tMax %float_10000
         %86 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_1
               OpStore %86 %int_0
         %89 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_0
               OpStore %89 %87
         %91 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_2
               OpStore %91 %90
         %93 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_3
               OpStore %93 %int_1
         %95 = OpLoad %v4float %origin
         %96 = OpVectorShuffle %v3float %95 %95 0 1 2
         %97 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_4
               OpStore %97 %96
         %99 = OpLoad %v4float %direction
        %100 = OpVectorShuffle %v3float %99 %99 0 1 2
        %101 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_5
               OpStore %101 %100
               OpStore %hitValue %87
               OpBranch %104
        %104 = OpLabel
               OpLoopMerge %106 %107 None
               OpBranch %105
        %105 = OpLabel
        %111 = OpLoad %108 %topLevelAS
        %112 = OpLoad %uint %rayFlags
        %114 = OpLoad %v4float %origin
        %115 = OpVectorShuffle %v3float %114 %114 0 1 2
        %116 = OpLoad %float %tMin
        %117 = OpLoad %v4float %direction
        %118 = OpVectorShuffle %v3float %117 %117 0 1 2
        %119 = OpLoad %float %tMax
               OpTraceNV %111 %112 %uint_255 %uint_0 %uint_0 %uint_0 %115 %116 %118 %119 %int_0
        %120 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_0
        %121 = OpLoad %v3float %120
        %122 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_2
        %123 = OpLoad %v3float %122
        %124 = OpFMul %v3float %121 %123
        %125 = OpLoad %v3float %hitValue
        %126 = OpFAdd %v3float %125 %124
               OpStore %hitValue %126
        %127 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_1
        %128 = OpLoad %int %127
        %129 = OpIAdd %int %128 %int_1
               OpStore %127 %129
        %131 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_3
        %132 = OpLoad %int %131
        %133 = OpIEqual %bool %132 %int_1
        %134 = OpLogicalNot %bool %133
               OpSelectionMerge %136 None
               OpBranchConditional %134 %135 %136
        %135 = OpLabel
        %137 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_1
        %138 = OpLoad %int %137
        %139 = OpSGreaterThanEqual %bool %138 %int_4
               OpBranch %136
        %136 = OpLabel
        %140 = OpPhi %bool %133 %105 %139 %135
               OpSelectionMerge %142 None
               OpBranchConditional %140 %141 %142
        %141 = OpLabel
               OpBranch %106
        %142 = OpLabel
        %144 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_4
        %145 = OpLoad %v3float %144
        %146 = OpLoad %v4float %origin
        %147 = OpVectorShuffle %v4float %146 %145 4 5 6 3
               OpStore %origin %147
        %148 = OpAccessChain %_ptr_RayPayloadNV_v3float %prd %int_5
        %149 = OpLoad %v3float %148
        %150 = OpLoad %v4float %direction
        %151 = OpVectorShuffle %v4float %150 %149 4 5 6 3
               OpStore %direction %151
        %152 = OpAccessChain %_ptr_RayPayloadNV_int %prd %int_3
               OpStore %152 %int_1
               OpBranch %107
        %107 = OpLabel
               OpBranch %104
        %106 = OpLabel
        %156 = OpLoad %153 %image
        %157 = OpLoad %v3uint %gl_LaunchIDEXT
        %158 = OpVectorShuffle %v2uint %157 %157 0 1
        %160 = OpBitcast %v2int %158
        %161 = OpLoad %v3float %hitValue
        %162 = OpCompositeExtract %float %161 0
        %163 = OpCompositeExtract %float %161 1
        %164 = OpCompositeExtract %float %161 2
        %165 = OpCompositeConstruct %v4float %162 %163 %164 %float_1
               OpImageWrite %156 %160 %165
               OpReturn
               OpFunctionEnd
